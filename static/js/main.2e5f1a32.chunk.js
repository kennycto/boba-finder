(this["webpackJsonpboba-finder"]=this["webpackJsonpboba-finder"]||[]).push([[0],{163:function(e,t,a){e.exports=a(329)},168:function(e,t,a){},329:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),o=a.n(s),i=(a(168),a(16)),c=a(17),l=a(18),u=a(19),p=a(53),d=a(160),m=a(140),g=a.n(m),v=a(334),h=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"MapMarker",key:this.props.key},r.a.createElement(v.a,{className:"icon",twoToneColor:"#eb2f96"}))}}]),a}(n.Component),f=a(332),S=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleSearch=function(e){var t=n.state,a=t.autocompleteService,r=t.currentUserLatLng;if(e.length>0){var s={input:e,location:r,radius:3e4};a.getQueryPredictions(s,(function(e){if(e){var t=e.map((function(e){return Object(p.a)({},e,{value:e.description})}));n.setState({options:t,suggestion:e})}}))}},n.onSelect=function(e){var t=n.state.map;n.state.geoCoderService.geocode({address:e},(function(a){var r=a[0].geometry.location,s=r.lat(),o=r.lng(),i={lat:s,lng:o};n.props.addSingleMarker(s,o,e,a[0].place_id),t.panTo(i),n.props.updateCurrentUserLatLng(i)}))},n.state={map:n.props.map,mapsApi:n.props.mapsApi,addSingleMarker:n.props.addSingleMarker,updateCurrentUserLatLng:n.props.updateCurrentUserLatLng,suggestions:[],options:[],currentUserLatLng:n.props.currentUserLatLng,autocompleteService:n.props.autocompleteService,geoCoderService:n.props.geoCoderService,mapsLoaded:n.props.mapsLoaded},n}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){this.setState({map:this.props.map,mapsApi:this.props.mapsApi,currentUserLatLng:this.props.currentUserLatLng,autocompleteService:this.props.autocompleteService,geoCoderService:this.props.geoCoderService,mapsLoaded:this.props.mapsLoaded})}},{key:"render",value:function(){var e=this.state.options;return r.a.createElement("div",{className:"MapAutoComplete"},r.a.createElement(f.a,{options:e,onSearch:this.handleSearch,onSelect:this.onSelect,style:{width:200},placeholder:"Enter where you at",disabled:!this.props.mapsLoaded}))}}]),a}(n.PureComponent),L=a(335),E=a(336),b=a(337),k=a(41),y=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;Object(i.a)(this,a),n=t.call(this,e);var r=e.place;return n.place=r,n.name=r.name,n.formatted_address=r.formatted_address,n.price_level=r.price_level,n.imageUrl=r.photos[0].getUrl(),n.open=r.opening_hours.isOpen(),n.rating=r.rating,n.user_ratings_total=r.user_ratings_total,n.distance=r.distance,n.duration=r.duration,n.navigate=e.navigate,n}return Object(c.a)(a,[{key:"render",value:function(){var e=this,t=r.a.createElement("span",null,"\xa0\xb7\xa0");return r.a.createElement("div",{className:"PlaceCard",onClick:function(){return e.props.navigate(e.place)}},r.a.createElement("div",{className:"header"},this.name),r.a.createElement("img",{src:this.imageUrl,alt:this.name}),r.a.createElement("div",{className:"details"},r.a.createElement("div",{className:"sub-header"},r.a.createElement("span",null,this.rating," Rating"),t,r.a.createElement("span",null,this.user_ratings_total," Reviews")),r.a.createElement("span",{className:"center"},this.formatted_address),r.a.createElement("div",{className:"multi-detail"},r.a.createElement("span",null,new Array(this.price_level).fill("$").join("")),t,this.open?r.a.createElement("div",null,r.a.createElement("span",null,"Open "),r.a.createElement(L.a,null)):r.a.createElement("div",null,r.a.createElement("span",null,"Closed "),r.a.createElement(E.a,null))),r.a.createElement("div",{className:"multi-detail footer"},r.a.createElement(b.a,{className:"icon"}),r.a.createElement("span",null,this.distance),t,r.a.createElement("span",null,this.duration))))}},{key:"computeHeaderBgColor",value:function(e){return e>=4?k.green[4]:e>=3?k.orange[4]:k.red[4]}}]),a}(n.PureComponent),C=a(105),w=a(338),O=a(339),j=a(340);var U=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).addSingleMarker=function(e,t,a,r){var s=new Map;s.set(r,{lat:e,lng:t,name:a,id:r}),console.log('Added new "'.concat(a,'" Marker')),n.setState({markers:s})},n.addMarker=function(e,t,a,r){var s=function(e){var t=new Map;return e.forEach((function(e,a){t.set(a,Object(p.a)({},e))})),t}(n.state.markers);s.has(r)?(s.get(r).lat=e,s.get(r).lng=t,console.log('Updated "'.concat(a,'" Marker'))):(s.set(r,{lat:e,lng:t,name:a,id:r}),console.log('Added new "'.concat(a,'" Marker'))),n.setState({markers:s})},n.handleSearch=function(){n.setState({searchResults:[],markers:new Map});var e=n.state,t=e.mapsApi,a=e.directionService,r=e.placesService,s=e.currentUserLatLng,o={location:s,type:["restaurant","cafe","food","points_of_interest","establishment"],query:"boba, bubble, milk, tea, \u6ce2\u9738, \u5976\u8336",rankBy:t.places.RankBy.DISTANCE};r.textSearch(o,(function(e){for(var t=e.length<10?e.length:10,r=function(t){var r=e[t],o=r.formatted_address,i={origin:s,destination:o,travelMode:"DRIVING"};a.route(i,(function(e,t){if("OK"===t){var a=e.routes[0].legs[0];if(a)a.duration.value/60<30&&(n.addSearchResult(r,a.distance.text,a.duration.text),n.addMarker(r.geometry.location.lat(),r.geometry.location.lng(),r.name,r.place_id))}}))},o=0;o<t;o++)r(o)}))},n.getCurrentLocation=function(){var e=n.state.map;navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){var a={lat:t.coords.latitude,lng:t.coords.longitude};e.panTo(a),n.updateCurrentUserLatLng(a),n.addSingleMarker(a.lat,a.lng,"You","")}))},n.updateCurrentUserLatLng=function(e){var t=n.state.mapsApi;n.setState({currentUserLatLng:new t.LatLng(e.lat,e.lng)})},n.navigate=function(e){var t=n.state.currentUserLatLng,a="".concat(t.lat().toString(),",\n\t\t\t").concat(t.lng().toString()),r=new URL("https://www.google.com/maps/dir/");r.searchParams.set("api",1),r.searchParams.set("origin",a),r.searchParams.set("destination",e.formatted_address),r.searchParams.set("travelmode","driving"),window.open(r)},n.state={pos:e.pos,mapsLoaded:!1,map:{},mapsApi:{},searchResults:[],markers:new Map,currentUserLatLng:{},autocompleteService:{},placesService:{},geoCoderService:{},directionService:{}},n}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(){this.setState({pos:this.props.pos})}},{key:"render",value:function(){var e=this;return this.state.pos?r.a.createElement("div",{className:"MapContainer"},r.a.createElement("section",{className:"GoogleMapReact"},r.a.createElement("div",{className:"search"},r.a.createElement(C.a,{type:"primary",icon:r.a.createElement(O.a,null),onClick:this.getCurrentLocation,disabled:!this.state.mapsLoaded}),r.a.createElement(S,{currentUserLatLng:this.state.currentUserLatLng,autocompleteService:this.state.autocompleteService,geoCoderService:this.state.geoCoderService,mapsApi:this.state.mapsApi,map:this.state.map,addSingleMarker:this.addSingleMarker,updateCurrentUserLatLng:this.updateCurrentUserLatLng,mapsLoaded:this.state.mapsLoaded}),r.a.createElement(C.a,{type:"primary",icon:r.a.createElement(j.a,null),onClick:this.handleSearch,disabled:!this.state.mapsLoaded},"Find Boba")),r.a.createElement(g.a,{bootstrapURLKeys:{key:"AIzaSyBwQDKEdMSdwUt9-ep22TOncRz0XtgCSQw",libraries:["places","directions"]},defaultZoom:12,defaultCenter:{lat:37.774929,lng:-122.419418},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(t){var a=t.map,n=t.maps;return e.apiHasLoaded(a,n)}},Array.from(this.state.markers.values()).map((function(e){return r.a.createElement(h,{name:e.name,key:e.id,lat:e.lat,lng:e.lng})})))),r.a.createElement("div",{className:"results"},this.state.searchResults.map((function(t){return r.a.createElement(y,{place:t,key:t.id,navigate:e.navigate})})))):r.a.createElement("div",{className:"Loading"},r.a.createElement(w.a,{className:"icon-large"}))}},{key:"apiHasLoaded",value:function(e,t){var a=this,n=37.774929,r=-122.41948;if(this.setState({mapsLoaded:!0,map:e,mapsApi:t,autocompleteService:new t.places.AutocompleteService,placesService:new t.places.PlacesService(e),directionService:new t.DirectionsService,geoCoderService:new t.Geocoder}),navigator.geolocation)navigator.geolocation.getCurrentPosition((function(s){n=s.coords.latitude,r=s.coords.longitude;var o={lat:n,lng:r};e.setCenter(o),a.setState({currentUserLatLng:new t.LatLng(n,r)})}));else{var s={lat:n,lng:r};e.setCenter(s),this.setState({currentUserLatLng:new t.LatLng(n,r)})}}},{key:"addSearchResult",value:function(e,t,a){var n=[].concat(Object(d.a)(this.state.searchResults),[Object(p.a)({},e,{distance:t,duration:a})]);n=n.sort((function(e,t){return t.rating-e.rating})),this.setState({searchResults:n})}}]),a}(r.a.PureComponent),M=a(330),A=a(333),N=(a(328),function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handleSubmit=function(e){console.log("Success:",e)},e}return Object(c.a)(a,[{key:"render",value:function(){var e={wrapperCol:{offset:8,span:16}};return r.a.createElement("div",{className:"Auth"},r.a.createElement(M.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:16}},{name:"basic",onFinish:this.handleSubmit}),r.a.createElement(M.a.Item,{label:"Email",name:"Email",rules:[{type:"email",message:"This is not a valid email!"},{required:!0,message:"Please input your email!"}]},r.a.createElement(A.a,null)),r.a.createElement(M.a.Item,{label:"Password",name:"password",rules:[{required:!0,min:6,message:"Please input your password!"}],hasFeedback:!0},r.a.createElement(A.a,null)),r.a.createElement(M.a.Item,e,r.a.createElement(C.a,{type:"primary",htmlType:"submit"},"Submit"))))}}]),a}(n.Component)),_=a(37),P=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={pos:null},n}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(_.c,null,r.a.createElement(_.a,{exact:!0,path:"/"},r.a.createElement(U,{pos:this.state.pos})),r.a.createElement(_.a,{exact:!0,path:"/auth"},r.a.createElement(N,null))))}},{key:"componentDidMount",value:function(){var e=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){var a={lat:t.coords.latitude,lng:t.coords.longitude};e.setState({pos:a})}))}}]),a}(r.a.PureComponent);a(327),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var R=a(99);o.a.render(r.a.createElement(R.a,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[163,1,2]]]);
//# sourceMappingURL=main.2e5f1a32.chunk.js.map